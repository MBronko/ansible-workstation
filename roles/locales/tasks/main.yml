- name: Set system timezone
  become: true
  ansible.builtin.timezone:
    name: "{{ timezone }}"

- name: Ensure locales package is installed
  become: true
  apt:
    name: 
      - locales
    state: latest

- name: Generate required locales
  become: true
  community.general.locale_gen:
    name:
      - en_US.UTF-8
      - en_GB.UTF-8
    state: present

- name: Set default system locale
  become: true
  command: localectl set-locale LANG=en_US.UTF-8 LC_TIME=en_GB.UTF-8 LC_PAPER=en_GB.UTF-8 LC_MEASUREMENT=en_GB.UTF-8
  changed_when: false

- name: Set polish keyboard in a traditional way
  become: true
  command: localectl set-x11-keymap pl pc105
  changed_when: false

- name: Set polish keyboard specifically for gnome just to be sure
  command: gsettings set org.gnome.desktop.input-sources sources "[('xkb', 'pl')]"
  changed_when: false
